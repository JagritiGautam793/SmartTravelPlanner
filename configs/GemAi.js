const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  //   want op in json format
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: " Generate Tarvel Plan for Location : New Zealand for 2 Days and 1 Night for Family with a luxury budget with a Flight details , Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, Hotel image url,geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place details, Place Image Url,Geo Coordinates, ticket Pricing,Time to travel each of the location for 2 days and 1 night with each day plan with best time to visit in JSON format.\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, crafting a luxury 2-day, 1-night New Zealand itinerary for a family requires focusing on efficiency and high-end experiences.  Given the very limited time, I\'ll center it around Auckland, the largest city, offering a blend of natural beauty, culture, and fine dining.  Trying to cover more of the country in such a short time would result in too much travel and not enough enjoyment.\n\nHere\'s the JSON structure outlining the trip.  Remember that flight prices and availability fluctuate *wildly*, so the examples below are just illustrative.  Hotel prices also vary significantly based on season and availability.  Always check booking links for the latest information.\n\n```json\n{\n  "tripName": "Auckland Luxury Getaway: 2 Days, 1 Night",\n  "location": "Auckland, New Zealand",\n  "budget": "Luxury",\n  "duration": "2 Days, 1 Night",\n  "travelers": "Family",\n  "flightDetails": {\n    "arrivalFlight": {\n      "airline": "Air New Zealand",\n      "flightNumber": "NZ101",\n      "departureCity": "Your Departure City (e.g., Sydney)",\n      "arrivalCity": "Auckland (AKL)",\n      "departureTime": "8:00 AM (Example)",\n      "arrivalTime": "11:00 AM (Example, adjust for time zones)",\n      "flightPrice": 500,\n      "bookingUrl": "https://www.google.com/flights (Use Google Flights to search)"\n    },\n    "departureFlight": {\n      "airline": "Air New Zealand",\n      "flightNumber": "NZ102",\n      "departureCity": "Auckland (AKL)",\n      "arrivalCity": "Your Departure City (e.g., Sydney)",\n      "departureTime": "6:00 PM (Example)",\n      "arrivalTime": "9:00 PM (Example, adjust for time zones)",\n      "flightPrice": 500,\n      "bookingUrl": "https://www.google.com/flights (Use Google Flights to search)"\n    }\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "The Grand by SkyCity",\n      "hotelAddress": "90 Federal Street, Auckland CBD, Auckland 1010, New Zealand",\n      "price": 450,\n      "hotelImageUrl": "https://example.com/grand_skycity.jpg",\n      "geoCoordinates": {\n        "latitude": -36.8481,\n        "longitude": 174.7624\n      },\n      "rating": 4.5,\n      "description": "Luxury hotel in the heart of Auckland, offering stunning views, a spa, and multiple dining options.",\n      "amenities": ["Spa", "Swimming Pool", "Fine Dining Restaurants", "Concierge Service"]\n    },\n    {\n      "hotelName": "Hilton Auckland",\n      "hotelAddress": "Princes Wharf, 147 Quay Street, Auckland CBD, Auckland 1010, New Zealand",\n      "price": 400,\n      "hotelImageUrl": "https://example.com/hilton_auckland.jpg",\n      "geoCoordinates": {\n        "latitude": -36.8435,\n        "longitude": 174.7675\n      },\n      "rating": 4.3,\n      "description": "Located on the waterfront, offering harbor views, an outdoor pool, and elegant rooms.",\n      "amenities": ["Waterfront Location", "Outdoor Pool", "Restaurant", "Bar"]\n    }\n  ],\n  "day1": {\n    "theme": "Auckland City & Harbor Exploration",\n    "bestTimeToVisit": "Morning to afternoon",\n    "activities": [\n      {\n        "placeName": "Auckland Domain",\n        "placeDetails": "Auckland\'s oldest park, offering stunning views of the city, harbour, and surrounding islands. Visit the Auckland War Memorial Museum within the park.",\n        "placeImageUrl": "https://example.com/auckland_domain.jpg",\n        "geoCoordinates": {\n          "latitude": -36.8645,\n          "longitude": 174.7735\n        },\n        "ticketPricing": 25,\n        "timeToTravel": "15 minutes from city center by car.",\n        "bestTimeToVisit": "Morning for pleasant weather."\n      },\n      {\n        "placeName": "Auckland War Memorial Museum",\n        "placeDetails": "Home to world class Maori and Pacific collections, significant natural history resources and major social and military history collections.",\n        "placeImageUrl": "https://example.com/auckland_museum.jpg",\n        "geoCoordinates": {\n          "latitude": -36.8653,\n          "longitude": 174.7704\n        },\n        "ticketPricing": 30,\n        "timeToTravel": "Within Auckland Domain",\n        "bestTimeToVisit": "Mid-morning."\n      },\n      {\n        "placeName": "Auckland Harbour Cruise",\n        "placeDetails": "Enjoy a scenic cruise of Auckland Harbour, taking in the sights of the Sky Tower, Harbour Bridge, and surrounding islands.  Consider a lunch cruise.",\n        "placeImageUrl": "https://example.com/auckland_harbour_cruise.jpg",\n        "geoCoordinates": {\n          "latitude": -36.8417,\n          "longitude": 174.7722\n        },\n        "ticketPricing": 80,\n        "timeToTravel": "10 minutes from city center to ferry terminal.",\n        "bestTimeToVisit": "Afternoon for calm waters."\n      },\n       {\n        "placeName": "Dinner at The Sugar Club",\n        "placeDetails": "Located at the top of the Sky Tower. Fine dining with panoramic city views. Book well in advance.",\n        "placeImageUrl": "https://example.com/sugar_club.jpg",\n        "geoCoordinates": {\n          "latitude": -36.8480,\n          "longitude": 174.7623\n        },\n        "ticketPricing": 150,\n        "timeToTravel": "Walking distance from many hotels.",\n        "bestTimeToVisit": "Evening for sunset views."\n      }\n    ]\n  },\n  "day2": {\n    "theme": "Island Escape & Departure",\n    "bestTimeToVisit": "Morning to afternoon",\n    "activities": [\n      {\n        "placeName": "Waiheke Island",\n        "placeDetails": "Take a ferry to Waiheke Island, known for its vineyards, olive groves, and beaches. Enjoy wine tasting at Mudbrick Vineyard & Restaurant or Cable Bay Vineyards.",\n        "placeImageUrl": "https://example.com/waiheke_island.jpg",\n        "geoCoordinates": {\n          "latitude": -36.7977,\n          "longitude": 175.0165\n        },\n        "ticketPricing": 45,\n        "timeToTravel": "40-minute ferry from Auckland Ferry Terminal.",\n        "bestTimeToVisit": "Morning for wine tasting."\n      },\n        {\n        "placeName": "Mudbrick Vineyard & Restaurant",\n        "placeDetails": "Offers stunning sea views, beautiful gardens and a wine cellar.",\n        "placeImageUrl": "https://example.com/mudbrick.jpg",\n        "geoCoordinates": {\n          "latitude": -36.7999,\n          "longitude": 175.0221\n        },\n        "ticketPricing": 100,\n        "timeToTravel": "On Waiheke Island.",\n        "bestTimeToVisit": "Lunchtime."\n      },\n      {\n        "placeName": "Return to Auckland & Departure",\n        "placeDetails": "Take the afternoon ferry back to Auckland. Allow ample time to get to the airport for your departure flight.",\n        "placeImageUrl": "https://example.com/auckland_ferry.jpg",\n        "geoCoordinates": {\n          "latitude": -36.8417,\n          "longitude": 174.7722\n        },\n        "ticketPricing": 45,\n        "timeToTravel": "40-minute ferry from Waiheke Island.",\n        "bestTimeToVisit": "Mid-afternoon."\n      }\n\n    ]\n  }\n}\n```\n\nKey Improvements and Explanations:\n\n* **Focus on Auckland:** Given the time constraint, focusing on Auckland and nearby Waiheke Island provides the best balance of experiences without excessive travel.\n* **Luxury Focus:** Hotels are top-end, and activities include fine dining and premium experiences.\n* **Realistic Timing:** Travel times are estimated and should be verified based on current traffic and ferry schedules. I\'ve built in buffer time.\n* **Flexibility:**  This is a *template*.  Specific interests (e.g., adventure sports, specific museums) would require further adjustments.\n* **`bookingUrl`**:  Using Google Flights allows users to input their origin and dates to find the best current prices.  Direct airline links change constantly.\n* **Place Details:**  Expanded descriptions give a better sense of what to expect.\n* **`amenities`**: Added to hotel options.\n* **Error Handling:** This code *assumes* that all data retrieval (e.g., image URLs) will be successful.  In a real application, you\'d need error handling to deal with cases where an image can\'t be loaded, etc.\n* **Restaurant Reservations:** Emphasized the need to book The Sugar Club well in advance.\n* **Image URLs**:  The image URLs are placeholders. You\'d need to replace them with actual links to relevant images.  Use a reliable image hosting service or your own server.\n* **Ferry Bookings:** Booking Waiheke ferry tickets in advance is *highly recommended*, especially during peak season.  Add a booking link to the JSON if you can find a reliable one for Fullers or Sealink.\n* **Transportation:** Assumes use of taxis or ride-sharing services for getting around Auckland, given the luxury budget.\n* **Best Time to Visit:** Added to each activity.\n\nTo use this:\n\n1.  **Replace Placeholders:**  Fill in your actual departure city, dates, flight preferences, and real image URLs.\n2.  **Check Availability and Prices:**  Use the booking URLs and other resources to get up-to-date pricing and availability.\n3.  **Book in Advance:**  Book flights, hotels, ferries, and restaurants well in advance, especially for a luxury trip during peak season.\n4.  **Customize:** Tailor the activities to your family\'s specific interests.\n\nThis JSON provides a solid foundation for a fantastic, albeit brief, luxury trip to Auckland.  Enjoy!\n',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
